<!DOCTYPE html>
<html lang="en" >

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta property="og:title" content="Analysing normative data" />
<meta property="og:description" content="Introduction In order to be able to present object at locations with a range of expectancy values, which is crucial to show that this has U-shaped relationship, I asked six member of my research group. to rate all combinations of objects and location that exist in the virtual enviroment for the schemaVR task." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jaquent.github.io/post/analysing-normative-data/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2018-01-10T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-01-10T00:00:00+00:00" />


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Analysing normative data"/>
<meta name="twitter:description" content="Introduction In order to be able to present object at locations with a range of expectancy values, which is crucial to show that this has U-shaped relationship, I asked six member of my research group. to rate all combinations of objects and location that exist in the virtual enviroment for the schemaVR task."/>
<meta name="generator" content="Hugo 0.95.0" />


    
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Analysing normative data",
  "url": "https://jaquent.github.io/post/analysing-normative-data/",
  "wordCount": "1201",
  "datePublished": "2018-01-10T00:00:00+00:00",
  "dateModified": "2018-01-10T00:00:00+00:00",
  "author": {
    "@type": "Person",
    "name": "Alex Quent"
  },
  "keywords": "experiments, schemaVR"
}
</script>



    <link rel="canonical" href="https://jaquent.github.io/post/analysing-normative-data/">

    <title>Analysing normative data | Jörn Alexander Quent&#39;s notebook</title>

    
    <!-- combined, minified CSS -->
    
    <link href="https://jaquent.github.io/css/style.57902785024534f6a4bf5176b349d59b428c860ddb38cb0275dbab17141bd512.css" rel="stylesheet" integrity="sha256-V5AnhQJFNPakv1F2s0nVm0KMhg3bOMsCddurFxQb1RI=" crossorigin="anonymous">
    

    <!-- minified Font Awesome for SVG icons -->
    
    <script defer src="https://jaquent.github.io/js/fontawesome.min.16a86fa8fbdecc0f27392feecb61ee0803a507820bded359407103a49126b52c.js" integrity="sha256-FqhvqPvezA8nOS/uy2HuCAOlB4IL3tNZQHEDpJEmtSw=" crossorigin="anonymous"></script>

    <!-- RSS 2.0 feed -->
    

    


<script src="//yihui.org/js/math-code.js"></script>
<script async
src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>


<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
</script>
 
  </head>

  <body>

    
    <div class="blog-masthead">
      <div class="container">
        <nav class="nav blog-nav">
          <a class="nav-link " href="https://jaquent.github.io">Home</a>
          
          <a class="nav-link" href="/about/" title="">About</a>
          
          
          <a class="nav-link" href="https://jaquent.me/" title="">jaquent.me</a>
          
        </nav>
      </div>
    </div>
    

    
    
    <header class="blog-header">
      <div class="container">
        <h1 class="blog-title" dir="auto"><a href="https://jaquent.github.io" rel="home">Jörn Alexander Quent's notebook</a></h1>
        <p class="lead blog-description" dir="auto">Posts on my work</p>
      </div>
    </header>
    
    

    
    <div class="container">
      <div class="row">
        <div class="col-sm-8 blog-main">

          


<article class="blog-post">
  <header>
    <h2 class="blog-post-title" dir="auto"><a href="https://jaquent.github.io/post/analysing-normative-data/">Analysing normative data</a></h2>
    <p class="blog-post-meta"><time datetime="2018-01-10T00:00:00Z">Wed Jan 10, 2018</time> by Alex Quent in 
<span class="fas fa-folder" aria-hidden="true"></span>&nbsp;<a href="/categories/experiments/" rel="category tag">experiments</a>


<span class="fas fa-tag" aria-hidden="true"></span>&nbsp;<a href="/tags/schemavr/" rel="tag">schemaVR</a>

</p>
  </header>
  <h1 id="introduction">Introduction</h1>
<p>In order to be able to present object at locations with a range of expectancy values, which is crucial to show that this has U-shaped relationship, I asked six member of my research group. to rate all combinations of objects and location that exist in the virtual enviroment for the schemaVR task. There were twenty possible objects and twenty possible locations (i.e. 400 object/location ratings in total).</p>
<p>After the completing these ratings, the participants were asked to rate the overall expectancy of those objects for a kitchen. In both cases, the scale ranged from -100 (unexpected) to 100 (expected) and was continuous. Here I will visualise and interpret the results. The code for the task can be found <a href="https://github.com/JAQuent/ratingStudy">https://github.com/JAQuent/ratingStudy</a>.</p>
<h2 id="used-libraries-and-functions">Used libraries and functions</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(ggplot2)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(gridExtra)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pValue <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">function</span>(x, sign <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;=&#39;</span>){
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">if </span>(<span style="color:#a6e22e">inherits</span>(x, <span style="color:#e6db74">&#34;lm&#34;</span>)){
</span></span><span style="display:flex;"><span>    s <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">summary.lm</span>(x)
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">pf</span>(s<span style="color:#f92672">$</span>fstatistic[1L], s<span style="color:#f92672">$</span>fstatistic[2L], s<span style="color:#f92672">$</span>fstatistic[3L], lower.tail <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">if</span>(x <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>){
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">stop</span>(<span style="color:#e6db74">&#34;There is no p-value greater than 1&#34;</span>)
</span></span><span style="display:flex;"><span>    } else <span style="color:#a6e22e">if</span>(x <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0.001</span>){
</span></span><span style="display:flex;"><span>      x.converted <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#39;&lt; .001&#39;</span>
</span></span><span style="display:flex;"><span>    } else{
</span></span><span style="display:flex;"><span>      x.converted <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">paste</span>(sign,<span style="color:#a6e22e">substr</span>(<span style="color:#a6e22e">as.character</span>(<span style="color:#a6e22e">round</span>(x, <span style="color:#ae81ff">3</span>)), <span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">5</span>))
</span></span><span style="display:flex;"><span>    } 
</span></span><span style="display:flex;"><span>  } else {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">if</span>(x <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>){
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">stop</span>(<span style="color:#e6db74">&#34;There is no p-value greater than 1&#34;</span>)
</span></span><span style="display:flex;"><span>    } else <span style="color:#a6e22e">if</span>(x <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0.001</span>){
</span></span><span style="display:flex;"><span>      x.converted <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#39;&lt; .001&#39;</span>
</span></span><span style="display:flex;"><span>    } else{
</span></span><span style="display:flex;"><span>      x.converted <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">paste</span>(sign,<span style="color:#a6e22e">substr</span>(<span style="color:#a6e22e">as.character</span>(<span style="color:#a6e22e">round</span>(x, <span style="color:#ae81ff">3</span>)), <span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">5</span>))
</span></span><span style="display:flex;"><span>    } 
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">return</span>(x.converted)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>rValue <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">function</span>(x){
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">if </span>(<span style="color:#a6e22e">inherits</span>(x, <span style="color:#e6db74">&#34;lm&#34;</span>)){
</span></span><span style="display:flex;"><span>    r.squared <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">summary</span>(x)<span style="color:#f92672">$</span>r.squared
</span></span><span style="display:flex;"><span>    x.converted <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">paste</span>(<span style="color:#e6db74">&#39;=&#39;</span>,<span style="color:#a6e22e">substr</span>(<span style="color:#a6e22e">as.character</span>(<span style="color:#a6e22e">round</span>(r.squared, <span style="color:#ae81ff">3</span>)), <span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">5</span>)) 
</span></span><span style="display:flex;"><span>  } else {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">if </span>(x <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>){
</span></span><span style="display:flex;"><span>      x.converted <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">paste</span>(<span style="color:#e6db74">&#39;= -&#39;</span>,<span style="color:#a6e22e">substr</span>(<span style="color:#a6e22e">as.character</span>(<span style="color:#a6e22e">abs</span>(<span style="color:#a6e22e">round</span>(x, <span style="color:#ae81ff">3</span>))), <span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">5</span>), sep <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>) 
</span></span><span style="display:flex;"><span>    } else {
</span></span><span style="display:flex;"><span>      x.converted <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">paste</span>(<span style="color:#e6db74">&#39;=&#39;</span>,<span style="color:#a6e22e">substr</span>(<span style="color:#a6e22e">as.character</span>(<span style="color:#a6e22e">abs</span>(<span style="color:#a6e22e">round</span>(x, <span style="color:#ae81ff">3</span>))), <span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">5</span>)) 
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">return</span>(x.converted) 
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="loading-the-rating-data">Loading the rating data</h2>
<p>I start with loading the data and creating a 20 x 20 x N matrix holding all 400 location ratings for all participants. Similarly, I create a 20 x N matrix to hold the 20 objects ratings. After that, I shuffle the data because people in the group could otherwise infer the identity of the other participants.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Prepare</span>
</span></span><span style="display:flex;"><span>subNo           <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span>N               <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">length</span>(subNo)
</span></span><span style="display:flex;"><span>locationRatings <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">array</span>(data <span style="color:#f92672">=</span> <span style="color:#66d9ef">NA</span>, dim <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">20</span>, N))
</span></span><span style="display:flex;"><span>objectRatings   <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">matrix</span>(<span style="color:#66d9ef">NA</span>, <span style="color:#ae81ff">20</span>, N)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Sequently loading data</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">for</span>(i in <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>N){
</span></span><span style="display:flex;"><span>  locationRatings[,,i] <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">matrix</span>(<span style="color:#a6e22e">scan</span>(<span style="color:#a6e22e">paste</span>(<span style="color:#e6db74">&#39;U:/Projects/schemaVR/normativeStudy/normativeData/locationRatings_&#39;</span>, <span style="color:#a6e22e">as.character</span>(subNo[i]) ,<span style="color:#e6db74">&#39;.dat&#39;</span>, sep <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>)), byrow <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>, ncol <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>)
</span></span><span style="display:flex;"><span>  objectRatings[,i]    <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">scan</span>(<span style="color:#a6e22e">paste</span>(<span style="color:#e6db74">&#39;U:/Projects/schemaVR/normativeStudy/normativeData/objectRatings_&#39;</span>, <span style="color:#a6e22e">as.character</span>(subNo[i]) ,<span style="color:#e6db74">&#39;.dat&#39;</span>, sep <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>))
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Shuffle to anonymise the data</span>
</span></span><span style="display:flex;"><span>shuffle         <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">sample</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>N)
</span></span><span style="display:flex;"><span>locationRatings <span style="color:#f92672">&lt;-</span> locationRatings[,,shuffle]
</span></span><span style="display:flex;"><span>objectRatings   <span style="color:#f92672">&lt;-</span> objectRatings[,shuffle]
</span></span></code></pre></div><p>After successfully loading the data and saving it in the matrices, I want to look at distribution of the location ratings. I collapse the data across all 6 participants and create a histogram:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Create a data frame and split by participant</span>
</span></span><span style="display:flex;"><span>locationRatingsDF <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.frame</span>(ID <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.factor</span>(<span style="color:#a6e22e">rep</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>N, each <span style="color:#f92672">=</span> <span style="color:#ae81ff">400</span>)), ratings <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(locationRatings))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create plot</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ggplot</span>(locationRatingsDF, <span style="color:#a6e22e">aes</span>(ratings)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">geom_histogram</span>(binwidth <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">theme</span>(panel.margin <span style="color:#f92672">=</span> <span style="color:#a6e22e">unit</span>(<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;cm&#34;</span>), text <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_text</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">12</span>)) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">labs</span>(y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Number of ratings&#39;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Unexpected to expected&#39;</span>) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">coord_cartesian</span>(xlim <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-100</span>, <span style="color:#ae81ff">100</span>), expand <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)
</span></span></code></pre></div><p><img src="/post/2018-01-10-analysing-normative-data-set_files/figure-html/unnamed-chunk-3-1.png" alt=""></p>
<p>The ratings are indeed spread across the whole scale, which is good. However it is also interesting to look at the individual distributions. There were I plot one histograms for each participant.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">ggplot</span>(locationRatingsDF, <span style="color:#a6e22e">aes</span>(ratings)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">facet_grid</span>(. <span style="color:#f92672">~</span> ID) <span style="color:#f92672">+</span> <span style="color:#a6e22e">geom_histogram</span>() <span style="color:#f92672">+</span> <span style="color:#a6e22e">theme</span>(panel.margin <span style="color:#f92672">=</span> <span style="color:#a6e22e">unit</span>(<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;cm&#34;</span>), text <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_text</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">12</span>)) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">labs</span>(y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Number of ratings&#39;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Unexpected to expected&#39;</span>) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">coord_cartesian</span>(xlim <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-100</span>, <span style="color:#ae81ff">100</span>), expand <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)
</span></span></code></pre></div><p><img src="/post/2018-01-10-analysing-normative-data-set_files/figure-html/unnamed-chunk-4-1.png" alt=""></p>
<p>Looking at the individual data, it is quite apparent that the distributions differ quite profoundly in terms how their responses are spread. On looks a bit Gaussian with a small dip around zero, while other distributions tended to include many extreme responses.</p>
<p>As I want to use this data to create a distribution to draw a combination of objects and locations from, I average the matrices and calculate the standard deviations to have an idea how the raters differed from each other. Here you can see te heatmaps:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>objectNames <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#39;microwave&#39;</span>,<span style="color:#e6db74">&#39;kitchen roll&#39;</span>,<span style="color:#e6db74">&#39;saucepan&#39;</span>, <span style="color:#e6db74">&#39;toaster&#39;</span>,<span style="color:#e6db74">&#39;fruit bowl&#39;</span>,<span style="color:#e6db74">&#39;tea pot&#39;</span>,<span style="color:#e6db74">&#39;knife&#39;</span>,<span style="color:#e6db74">&#39;mixer&#39;</span>,<span style="color:#e6db74">&#39;bread&#39;</span>,<span style="color:#e6db74">&#39;glass jug&#39;</span>,<span style="color:#e6db74">&#39;mug&#39;</span>,<span style="color:#e6db74">&#39;dishes&#39;</span>,<span style="color:#e6db74">&#39;towels&#39;</span>,<span style="color:#e6db74">&#39;toy&#39;</span>,<span style="color:#e6db74">&#39;pile of books&#39;</span>,<span style="color:#e6db74">&#39;umbrella&#39;</span>,<span style="color:#e6db74">&#39;hat&#39;</span>,<span style="color:#e6db74">&#39;helmet&#39;</span>,<span style="color:#e6db74">&#39;calendar&#39;</span>,<span style="color:#e6db74">&#39;fan&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Calculate metrics</span>
</span></span><span style="display:flex;"><span>averageLocationRatings <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">apply</span>(locationRatings, <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>, mean)
</span></span><span style="display:flex;"><span>sdLocationRatings      <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">apply</span>(locationRatings, <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>, sd)
</span></span><span style="display:flex;"><span>averageObjectRatings   <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">apply</span>(objectRatings, <span style="color:#ae81ff">1</span>, mean)
</span></span><span style="display:flex;"><span>sdObjectRatings        <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">apply</span>(objectRatings, <span style="color:#ae81ff">1</span>, sd)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create dataframes to plot</span>
</span></span><span style="display:flex;"><span>averageLocationRatingsDF <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.frame</span>(Object <span style="color:#f92672">=</span> <span style="color:#a6e22e">rep</span>(<span style="color:#a6e22e">factor</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">20</span>, labels <span style="color:#f92672">=</span> objectNames), <span style="color:#ae81ff">20</span>), Location <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.factor</span>(<span style="color:#a6e22e">rep</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">20</span>, each <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>)), Ratings <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(averageLocationRatings))
</span></span><span style="display:flex;"><span>sdLocationRatingsDF      <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.frame</span>(Object <span style="color:#f92672">=</span> <span style="color:#a6e22e">rep</span>(<span style="color:#a6e22e">factor</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">20</span>, labels <span style="color:#f92672">=</span> objectNames), <span style="color:#ae81ff">20</span>), Location <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.factor</span>(<span style="color:#a6e22e">rep</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">20</span>, each <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>)), SD <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(sdLocationRatings))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>averageObjectRatingsDF  <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.frame</span>(Object <span style="color:#f92672">=</span> <span style="color:#a6e22e">factor</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">20</span>, labels <span style="color:#f92672">=</span> objectNames), Ratings <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(averageObjectRatings))
</span></span><span style="display:flex;"><span>sdObjectRatingsDF       <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.frame</span>(Object <span style="color:#f92672">=</span> <span style="color:#a6e22e">factor</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">20</span>, labels <span style="color:#f92672">=</span> objectNames), SD <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(sdObjectRatings))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create average heatmaps</span>
</span></span><span style="display:flex;"><span>plot1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ggplot</span>(averageLocationRatingsDF, <span style="color:#a6e22e">aes</span>(Location, Object)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">geom_tile</span>(<span style="color:#a6e22e">aes</span>(fill <span style="color:#f92672">=</span> Ratings)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">scale_fill_gradient</span>(low <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;white&#34;</span>, high <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;red&#34;</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">scale_x_discrete</span>(expand <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)) <span style="color:#f92672">+</span>  <span style="color:#a6e22e">scale_y_discrete</span>(expand <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Average: Object/location&#39;</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">theme</span>(legend.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;none&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>plot2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ggplot</span>(averageObjectRatingsDF, <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, y <span style="color:#f92672">=</span> Object)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">geom_tile</span>(<span style="color:#a6e22e">aes</span>(fill <span style="color:#f92672">=</span> Ratings)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">scale_fill_gradient</span>(low <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;white&#34;</span>, high <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;red&#34;</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">scale_x_discrete</span>(expand <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)) <span style="color:#f92672">+</span>  <span style="color:#a6e22e">scale_y_discrete</span>(expand <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">labs</span>(x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>, title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Overall&#39;</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">theme</span>(axis.title.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(), axis.text.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(), axis.ticks.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(), plot.margin<span style="color:#f92672">=</span><span style="color:#a6e22e">unit</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0.2</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0.62</span>, <span style="color:#ae81ff">0</span>),<span style="color:#e6db74">&#34;cm&#34;</span>))
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">grid.arrange</span>(plot1, plot2, ncol <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>, widths <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">5.5</span>, <span style="color:#ae81ff">1</span>))
</span></span></code></pre></div><p><img src="/post/2018-01-10-analysing-normative-data-set_files/figure-html/unnamed-chunk-5-1.png" alt=""></p>
<p>The first twelve objects (from microwave to dishes) are supposed to be expected in a kitchen. This is also visible in the heatmaps both in the heatmap showing the average ratings for every object/location combination and in the overall heatmap showing the average ratings for the overall expectancy of a particular object in kitchen. From the white vertical stripes, it is also apparent that no object is really expected for some locations. One of those location for instance is on the floor in a corner of the room.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Create Sd heatmap</span>
</span></span><span style="display:flex;"><span>plot3 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ggplot</span>(sdLocationRatingsDF, <span style="color:#a6e22e">aes</span>(Location, Object)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">geom_tile</span>(<span style="color:#a6e22e">aes</span>(fill <span style="color:#f92672">=</span> SD)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">scale_fill_gradient</span>(low <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;white&#34;</span>, high <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;red&#34;</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">scale_x_discrete</span>(expand <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)) <span style="color:#f92672">+</span>  <span style="color:#a6e22e">scale_y_discrete</span>(expand <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;SD: Object/location&#39;</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">theme</span>(legend.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;none&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>plot4 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ggplot</span>(sdObjectRatingsDF, <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, y <span style="color:#f92672">=</span> Object)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">geom_tile</span>(<span style="color:#a6e22e">aes</span>(fill <span style="color:#f92672">=</span> SD)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">scale_fill_gradient</span>(low <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;white&#34;</span>, high <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;red&#34;</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">scale_x_discrete</span>(expand <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)) <span style="color:#f92672">+</span>  <span style="color:#a6e22e">scale_y_discrete</span>(expand <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">labs</span>(x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>, title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Overall&#39;</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">theme</span>(axis.title.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(), axis.text.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(), axis.ticks.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(), plot.margin<span style="color:#f92672">=</span><span style="color:#a6e22e">unit</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0.2</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0.62</span>, <span style="color:#ae81ff">0</span>),<span style="color:#e6db74">&#34;cm&#34;</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">grid.arrange</span>(plot3, plot4, ncol <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>, widths <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">5.5</span>, <span style="color:#ae81ff">1</span>))
</span></span></code></pre></div><p><img src="/post/2018-01-10-analysing-normative-data-set_files/figure-html/unnamed-chunk-6-1.png" alt=""></p>
<p>The SD are quite high in general. This stems from the fact that participants seem to have used difference response criterions. It is notable there is a lot of disagreement among the participant with regard to expectancy of the towel. This definitely needs more attention and I am considering not to use the towels.</p>
<p>Finally, I am also interest to see whether there is a relationship between the average expectancy across all locations and the overall expectancy rated at the end of the experiment.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>objectAverageLocation <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">rowMeans</span>(averageLocationRatings)
</span></span><span style="display:flex;"><span>correlationDF         <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.frame</span>(Object <span style="color:#f92672">=</span> <span style="color:#a6e22e">factor</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">20</span>, labels <span style="color:#f92672">=</span> objectNames), Location <span style="color:#f92672">=</span> objectAverageLocation, Overall <span style="color:#f92672">=</span> averageObjectRatings)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>correlation <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">cor.test</span>(<span style="color:#f92672">~</span> Overall <span style="color:#f92672">+</span> Location, data <span style="color:#f92672">=</span> correlationDF)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ggplot</span>(correlationDF, <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> Location, y <span style="color:#f92672">=</span> Overall)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">geom_point</span>() <span style="color:#f92672">+</span> <span style="color:#a6e22e">geom_smooth</span>(method <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;lm&#39;</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">coord_cartesian</span>(xlim <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-25</span>, <span style="color:#ae81ff">35</span>), ylim <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-75</span>, <span style="color:#ae81ff">150</span>), expand <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Average rating across locations vs. overall ratings&#39;</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">annotate</span>(<span style="color:#e6db74">&#34;text&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">-50</span>, label <span style="color:#f92672">=</span> <span style="color:#a6e22e">paste</span>(<span style="color:#e6db74">&#39;r &#39;</span>, <span style="color:#a6e22e">rValue</span>(correlation<span style="color:#f92672">$</span>estimate), <span style="color:#e6db74">&#39;, p &#39;</span> , <span style="color:#a6e22e">pValue</span>(correlation<span style="color:#f92672">$</span>p.value), sep <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>) , size <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>)
</span></span></code></pre></div><p><img src="/post/2018-01-10-analysing-normative-data-set_files/figure-html/unnamed-chunk-7-1.png" alt=""></p>
<p>As it turns out, there is a significant positive correlation between the average ratings across locations and the overall ratingsr, <em>r</em> = .556, <em>p</em> = .011.</p>


  

  
  <hr>
  <footer>

  
    <section>
    <h4>Share</h4>
    <nav class="nav sharing-icons">
      <a class="nav-item" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fjaquent.github.io%2fpost%2fanalysing-normative-data%2f" title="Share on Facebook"><span class="fab fa-facebook-f fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fjaquent.github.io%2fpost%2fanalysing-normative-data%2f" title="Share on LinkedIn"><span class="fab fa-linkedin-in fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://twitter.com/intent/tweet?url=https%3a%2f%2fjaquent.github.io%2fpost%2fanalysing-normative-data%2f&amp;text=Analysing%20normative%20data" title="Tweet this"><span class="fab fa-twitter fa-2x"></span></a>
    </nav>
  </section>

  

  
  </footer>
  

</article> 



        </div> <!-- /.blog-main -->

        <aside class="col-sm-3 ml-auto blog-sidebar">
    
         <section class="sidebar-module">
 <h4>Recent Posts</h4>
    <ol class="list-unstyled">


<li><a href="/post/2022-03-21-matlab-function-to-create-stacked-texture-maps-for-unity/">Matlab function to create stacked texture maps for Unity</a></li>

<li><a href="/post/finding-a-u-shape-with-bayesian-interrupted-regression/">Finding a U-shape with Bayesian interrupted regression</a></li>

<li><a href="/post/a-u-shape-that-appears-as-a-linear-correlation-when-averaged/">A U-shape that appears as a linear correlation when averaged</a></li>

<li><a href="/post/the-priors-that-i-use-for-logsitic-regression-now/">The priors that I use for logsitic regression now</a></li>

<li><a href="/post/bayesian-sequential-designs-are-superior/">Bayesian sequential designs are superior</a></li>

    </ol>
 </section>

    
    
          <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
 <section class="sidebar-module">
    
        
        <h4>Categories</h4>
        <p>
            
            <a class="badge badge-secondary" href="/categories/experiments">experiments</a>
            
            <a class="badge badge-secondary" href="/categories/general">general</a>
            
        </p>
        
    
        
        <h4>Tags</h4>
        <p>
            
            <a class="badge badge-secondary" href="/tags/bayesian-stats">bayesian-stats</a>
            
            <a class="badge badge-secondary" href="/tags/logistic-regression">logistic-regression</a>
            
            <a class="badge badge-secondary" href="/tags/matlab">matlab</a>
            
            <a class="badge badge-secondary" href="/tags/schemavr">schemavr</a>
            
            <a class="badge badge-secondary" href="/tags/sequential-design">sequential-design</a>
            
            <a class="badge badge-secondary" href="/tags/textures">textures</a>
            
            <a class="badge badge-secondary" href="/tags/u-shape">u-shape</a>
            
            <a class="badge badge-secondary" href="/tags/unity">unity</a>
            
        </p>
        
    
</section>
    
</aside>

      </div> <!-- /.row -->
    </div> <!-- /.container -->
    

    
    <footer class="blog-footer">
      <p dir="auto">
      
      Blog template created by <a href="https://twitter.com/mdo">@mdo</a>, ported to Hugo by <a href='https://twitter.com/mralanorth'>@mralanorth</a>.
      
      </p>
      <p>
      <a href="#">Back to top</a>
      </p>
    </footer>
    

  </body>

</html>
