<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta property="og:title" content="Stimulus selection for schemaVR1 (Attempt 1)" />
<meta property="og:description" content="Introduction The aim is to select a certain number (20) of combinations of objects and locations that cover the whole range of expectancy values. The previous analysis of this data set can be found here. The code for the task can be found here.
Used libraries and functions library(ggplot2)  Loading the rating data I start with loading the raw data and creating a 20 x 20 x N matrix holding all 400 location ratings for all participants." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jaquent.github.io/2018/01/stimulus-selection-for-schemavr1-attempt-1/" /><meta property="article:published_time" content="2018-01-12T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2018-01-12T00:00:00&#43;00:00"/>

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Stimulus selection for schemaVR1 (Attempt 1)"/>
<meta name="twitter:description" content="Introduction The aim is to select a certain number (20) of combinations of objects and locations that cover the whole range of expectancy values. The previous analysis of this data set can be found here. The code for the task can be found here.
Used libraries and functions library(ggplot2)  Loading the rating data I start with loading the raw data and creating a 20 x 20 x N matrix holding all 400 location ratings for all participants."/>



    <link rel="canonical" href="https://jaquent.github.io/2018/01/stimulus-selection-for-schemavr1-attempt-1/">

    <title>
      
        Stimulus selection for schemaVR1 (Attempt 1) | Jörn Alexander Quent&#39;s notebook
      
    </title>

    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link href="https://jaquent.github.iocss/style.css" rel="stylesheet">

    

    

    
  </head>
  <body>
    
      <header class="blog-header">
    <nav class="navbar navbar-expand-md navbar-light bg-light">
        <a class="navbar-brand" href="/">
            Jörn Alexander Quent&#39;s notebook
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
            aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-between" id="navbarNav">
            <ul class="navbar-nav">
                
                
                <li class="nav-item ">
                    
                        <a class="nav-link" href="/">Home</a>
                    
                </li>
                
                <li class="nav-item ">
                    
                        <a class="nav-link" href="/about/">About</a>
                    
                </li>
                
            </ul>
            
        </div>
    </nav>
</header>
    

    
    <div class="container">
      <div class="row">
        <div class="col-12 col-lg-8 blog-main">

          

<header>
    <h2 class="blog-post-title">
        <a class="text-dark" href="/2018/01/stimulus-selection-for-schemavr1-attempt-1/">Stimulus selection for schemaVR1 (Attempt 1)</a>
    </h2>
    


<div class="blog-post-date text-secondary">
    
        Jan 12, 2018
    
    
        by <span rel="author">Alex Quent</span>
    
</div>

    
<div class="blog-post-tags text-secondary">
    <strong>Tags:</strong>
    
        <a class="badge badge-primary" href="/tags/schemavr1">schemaVR1</a>
    
        <a class="badge badge-primary" href="/tags/rmarkdown">rmarkdown</a>
    
</div>

    
<div class="blog-post-categories text-secondary">
    <strong>Categories:</strong>
    
        <a class="badge badge-primary" href="/categories/experiments">experiments</a>
    
</div>

    <hr>
</header>
<article class="blog-post">
    

<h1 id="introduction">Introduction</h1>

<p>The aim is to select a certain number (20) of combinations of objects and locations that cover the whole range of expectancy values. The previous analysis of this data set can be found <a href="https://jaquent.github.io/2018/01/analysing-normative-data-set/">here</a>. The code for the task can be found <a href="https://github.com/JAQuent/ratingStudy">here</a>.</p>

<h2 id="used-libraries-and-functions">Used libraries and functions</h2>

<pre><code class="language-r">library(ggplot2)
</code></pre>

<h2 id="loading-the-rating-data">Loading the rating data</h2>

<p>I start with loading the raw data and creating a 20 x 20 x N matrix holding all 400 location ratings for all participants.</p>

<pre><code class="language-r"># Prepare
subNo           &lt;- 1:6
N               &lt;- length(subNo)
locationRatings &lt;- array(data = NA, dim = c(20, 20, N))

# Sequently loading data
for(i in 1:N){
  locationRatings[,,i] &lt;- matrix(scan(paste('U:/Projects/schemaVR/normativeStudy/normativeData/locationRatings_', as.character(subNo[i]) ,'.dat', sep = '')), byrow = TRUE, ncol = 20)
}
</code></pre>

<h2 id="raking-the-ratings-within-each-participants">Raking the ratings within each participants</h2>

<p>Now I will rank all ratings within each participant and to create one matrix containing the averaged ranks. I first try to use <em>order()</em> to rank this data, but this does not work at all and then I found that there is function called <em>rank()</em>, which does the job perfectly.</p>

<pre><code class="language-r"># Calculate ranks
rankedRatings &lt;- array(data = NA, dim = c(20, 20, N))

for(i in 1:N){
  rankedRatings[,,i] &lt;- rank(locationRatings[,,i])
}


# Calculate mean rank per object/ location
meanRankedRatings &lt;- apply(rankedRatings, 1:2, mean)

# Plot heatmap
objectNames &lt;- c('microwave','kitchen roll','saucepan', 'toaster','fruit bowl','tea pot','knife','mixer','bread','glass jug','mug','dishes','towels','toy','pile of books','umbrella','hat','helmet','calendar','fan')

meanRankedRatingsDF &lt;- data.frame(Object = rep(factor(1:20, labels = objectNames), 20), Location = as.factor(rep(1:20, each = 20)), Ranks = c(meanRankedRatings))

ggplot(meanRankedRatingsDF, aes(Location, Object)) + geom_tile(aes(fill = Ranks)) + scale_fill_gradient(low = &quot;white&quot;, high = &quot;red&quot;) + scale_x_discrete(expand = c(0, 0)) +  scale_y_discrete(expand = c(0, 0)) + labs(title = 'Mean ranks')
</code></pre>

<p><img src="/post/2018-01-12-stimulus-selection-for-schemavr1-attempt-1_files/figure-markdown_github/unnamed-chunk-3-1.png" alt="" /></p>

<p>The heatmap basically looks exactly like the heatmap based on the mean unranked ratings (to be found <a href="https://jaquent.github.io/2018/01/analysing-normative-data-set/">here</a>).</p>

<h2 id="selection-of-object-location-combinations">Selection of object/location combinations</h2>

<p>Now, my aim is to find the best set of object/location combinations. The first step is to find a location for each object in a way that ensures that range of expectancy values spreads across the whole scale. The aim is to find a set of values that closely matches our linearly spaced target spread:</p>

<pre><code class="language-r">targetSpread &lt;- seq(1, 400,length = 20)
targetSpread
</code></pre>

<pre><code>##  [1]   1  22  43  64  85 106 127 148 169 190 211 232 253 274 295 316 337
## [18] 358 379 400
</code></pre>

<p>I try that with a brute force approach by randomly selecting twenty object/location combinations and has the lowest summed squared deviation from our target spread (see above).</p>

<pre><code class="language-r"># Preparation
numberObjects &lt;- 20
iterations    &lt;- 100000 
locations     &lt;- matrix(NA, nrow = numberObjects, ncol = iterations)
meanRanks     &lt;- matrix(NA, nrow = numberObjects, ncol = iterations)
differences   &lt;- rep(NA, iterations)

# Sample differences 
for(i in 1:iterations){
  locations[,i] &lt;- sample(1:numberObjects)
  for(j in 1:numberObjects){
    meanRanks[j, i] &lt;- meanRankedRatings[j, locations[j,i]] # Extracting the mean ranks
  }
  differences[i] &lt;- sum((sort(meanRanks[, i]) - targetSpread)^2) # Calculating summed squared deviation
}
</code></pre>

<p>The lowest summed squared deviation is 2129.3680556 found after 10^{5} iterations.</p>

<pre><code class="language-r">round(sort(meanRanks[, differences == min(differences)]))
</code></pre>

<pre><code>##  [1]  17  40  55  61  78  98 120 148 182 190 200 224 255 284 295 322 325
## [18] 363 367 379
</code></pre>

<pre><code class="language-r">targetSpread
</code></pre>

<pre><code>##  [1]   1  22  43  64  85 106 127 148 169 190 211 232 253 274 295 316 337
## [18] 358 379 400
</code></pre>

<p>The selected combination comes very close to the target spread as you see above where I juxtaposed both.</p>

<pre><code class="language-r"># Visualisation
ggplot(data.frame(differences), aes(differences)) + geom_histogram(binwidth = 500) + theme(panel.margin = unit(1, &quot;cm&quot;), text = element_text(size = 12)) + 
        labs(y = 'Number of occurences', x = 'Summed squared deviation', title = paste('Distribution of summed squared deviations after', iterations, 'iterations')) + coord_cartesian(xlim = c(0, 109000), expand = FALSE)
</code></pre>

<p><img src="/post/2018-01-12-stimulus-selection-for-schemavr1-attempt-1_files/figure-markdown_github/unnamed-chunk-7-1.png" alt="" /></p>

<h2 id="selection-of-foils">Selection of foils</h2>

<p>Now it is time to find the two foils for each object that have the closest in terms of expectancy to the selected test location.</p>

<pre><code class="language-r">selectedLocations &lt;- locations[, differences == min(differences)]
foils             &lt;- matrix(NA, nrow = numberObjects, ncol = 2)
foilsRank         &lt;- matrix(NA, nrow = numberObjects, ncol = 2)

for(i in 1:numberObjects){
  absDifference      &lt;- abs(meanRankedRatings[i, selectedLocations[i]] - meanRankedRatings[i,]) # Calculating the absolute difference
  foil1absDifference &lt;- sort(abs(meanRankedRatings[i, selectedLocations[i]] - meanRankedRatings[i,]))[2] # Sort differences and compare to select location and select nearest
  foil2absDifference &lt;- sort(abs(meanRankedRatings[i, selectedLocations[i]] - meanRankedRatings[i,]))[3] # Sort differences and compare to select location and select second neasted
  # The following sections jsut deals if the case when more than one values is the nearest
  if(length(c(1:20)[absDifference == foil1absDifference]) == 1){
     foils[i, 1]     &lt;-  c(1:20)[absDifference == foil1absDifference][1] #
     foils[i, 2]     &lt;-  c(1:20)[absDifference == foil2absDifference][1]
     foilsRank[i, 1] &lt;- meanRankedRatings[i, absDifference == foil1absDifference][1]
     foilsRank[i, 2] &lt;- meanRankedRatings[i, absDifference == foil2absDifference][1]
  } else if(length(c(1:20)[absDifference == foil1absDifference]) == 2){
     foils[i, 1]     &lt;-  c(1:20)[absDifference == foil1absDifference][1]
     foils[i, 2]     &lt;-  c(1:20)[absDifference == foil2absDifference][2]
     foilsRank[i, 1] &lt;- meanRankedRatings[i, absDifference == foil1absDifference][1]
     foilsRank[i, 2] &lt;- meanRankedRatings[i, absDifference == foil2absDifference][2]
  } else {
    error('Too many values')
  }
}
</code></pre>

<h2 id="final-selection">Final selection</h2>

<pre><code class="language-r">finalSelection &lt;- data.frame(Object = objectNames, Location = selectedLocations, olRank = meanRanks[, differences == min(differences)], foil1 = foils[, 1], foil1Rank = foilsRank[,1], foil2 = foils[, 2], foil2Rank = foilsRank[, 2])

finalSelection[order(finalSelection$olRank),]
</code></pre>

<pre><code>##           Object Location    olRank foil1 foil1Rank foil2 foil2Rank
## 1      microwave       13  16.83333    12  52.75000    10  54.33333
## 4        toaster        4  39.75000     6  43.08333    10  46.83333
## 7          knife        5  55.00000    10  45.58333     6  64.66667
## 8          mixer        6  61.41667    13  65.83333    12  68.50000
## 15 pile of books       10  78.25000     4 104.00000    14 108.08333
## 20           fan       12  97.50000    10  98.25000    16 106.83333
## 17           hat       14 120.00000    11 120.25000     7 122.66667
## 16      umbrella       16 148.50000     1 152.75000    14 155.08333
## 18        helmet       20 181.58333     1 177.16667    15 187.41667
## 3       saucepan       11 189.75000     5 172.50000    15 226.00000
## 19      calendar        3 199.58333    20 198.33333     2 206.00000
## 13        towels       17 224.50000    20 221.16667     1 228.50000
## 14           toy        9 255.33333    11 253.83333    16 250.75000
## 10     glass jug       15 283.50000     7 282.50000     8 295.50000
## 9          bread        2 295.41667    18 278.75000     3 314.16667
## 6        tea pot        8 322.41667     1 321.33333     3 324.66667
## 2   kitchen roll        1 325.16667    14 328.66667     8 328.83333
## 12        dishes        7 363.16667    19 359.50000     1 369.00000
## 5     fruit bowl       19 367.08333    17 367.33333     3 360.41667
## 11           mug       18 378.66667     3 379.25000     7 373.83333
</code></pre>


    

    

    <h4>See also</h4>
    <ul>
        
            <li><a href="/2018/01/analysing-normative-data-set/">Analysing normative data set</a></li>
        
            <li><a href="/2017/11/running-rmarkdown-on-cbu-computer-and-first-pilot-session/">Running RMarkdown on CBU computer and first pilot session</a></li>
        
    </ul>


</article>



        </div>

        <aside class="col-12 col-lg-3 ml-auto blog-sidebar">
    
        


<section>
    <h4>Recent Posts</h4>
    <ol class="list-unstyled">
        
        <li>
            <a href="/2018/11/selecting-and-checking-living-non-living-words/">Selecting and checking living/non-living words</a>
        </li>
        
        <li>
            <a href="/2018/04/3d-location-recall-task-in-vr/">3D location recall task in VR</a>
        </li>
        
        <li>
            <a href="/2018/03/general-update-and-plan-for-the-future/">General update and plan for the future</a>
        </li>
        
        <li>
            <a href="/2018/03/mixed-linear-models/">Mixed linear models</a>
        </li>
        
        <li>
            <a href="/2018/02/final-design-of-schemavr1/">Final design of schemaVR1</a>
        </li>
        
    </ol>
</section>

    
    
        <section>
    
        
    
        
        <h4>Categories</h4>
        <p>
            
            <a class="badge badge-primary" href="/categories/experiments">experiments</a>
            
            <a class="badge badge-primary" href="/categories/general">general</a>
            
        </p>
        
    
        
        <h4>Tags</h4>
        <p>
            
            <a class="badge badge-primary" href="/tags/about">about</a>
            
            <a class="badge badge-primary" href="/tags/data-check">data-check</a>
            
            <a class="badge badge-primary" href="/tags/familiarity">familiarity</a>
            
            <a class="badge badge-primary" href="/tags/graphics">graphics</a>
            
            <a class="badge badge-primary" href="/tags/hippocampus">hippocampus</a>
            
            <a class="badge badge-primary" href="/tags/ideas-and-plans">ideas-and-plans</a>
            
            <a class="badge badge-primary" href="/tags/lab-meeting">lab-meeting</a>
            
            <a class="badge badge-primary" href="/tags/lme4/lmertest">lme4/lmertest</a>
            
            <a class="badge badge-primary" href="/tags/memory">memory</a>
            
            <a class="badge badge-primary" href="/tags/meta">meta</a>
            
            <a class="badge badge-primary" href="/tags/mixed-linear-models">mixed-linear-models</a>
            
            <a class="badge badge-primary" href="/tags/mpfc">mpfc</a>
            
            <a class="badge badge-primary" href="/tags/noveltyvr">noveltyvr</a>
            
            <a class="badge badge-primary" href="/tags/pilot-study">pilot-study</a>
            
            <a class="badge badge-primary" href="/tags/ratingstudy">ratingstudy</a>
            
            <a class="badge badge-primary" href="/tags/recognition-memory">recognition-memory</a>
            
            <a class="badge badge-primary" href="/tags/recollection">recollection</a>
            
            <a class="badge badge-primary" href="/tags/research-design">research-design</a>
            
            <a class="badge badge-primary" href="/tags/rmarkdown">rmarkdown</a>
            
            <a class="badge badge-primary" href="/tags/schema">schema</a>
            
            <a class="badge badge-primary" href="/tags/schemavr">schemavr</a>
            
            <a class="badge badge-primary" href="/tags/schemavr1">schemavr1</a>
            
            <a class="badge badge-primary" href="/tags/unity3d">unity3d</a>
            
            <a class="badge badge-primary" href="/tags/word-properties">word-properties</a>
            
            <a class="badge badge-primary" href="/tags/words">words</a>
            
        </p>
        
    
</section>
    
</aside>

      </div>
    </div>
    

    
      






<footer class="blog-footer w-100">
    <nav class="navbar navbar-light bg-light">
        <p class="w-100 text-center">Hugo template made with ❤ by <a href="https://github.com/Xzya">Xzya</a>, inspired by <a href="https://github.com/alanorth/hugo-theme-bootstrap4-blog">hugo-theme-bootstrap4-blog</a></p>
        <p class="w-100 text-center"><a href="#">Back to top</a></p>
    </nav>
</footer>

    

    
    
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  </body>
</html>
